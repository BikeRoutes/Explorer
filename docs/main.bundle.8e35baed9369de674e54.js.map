{"version":3,"sources":["webpack://webclient/webpack/bootstrap","webpack://webclient/./src/queries/index.ts","webpack://webclient/./src/model/index.ts","webpack://webclient/./src/components/Map/Map.tsx","webpack://webclient/./src/setup/index.js","webpack://webclient/./src/setup/polyfills.js","webpack://webclient/./src/components/App/index.ts","webpack://webclient/./src/components/App/App.tsx","webpack://webclient/./src/components/View/index.ts","webpack://webclient/./src/queries/queries.ts","webpack://webclient/./src/API/index.ts","webpack://webclient/./src/API/API.ts","webpack://webclient/./src/components/View/View.ts","webpack://webclient/./src/components/Explorer/Explorer.tsx","webpack://webclient/./src/components/Popup/Popup.tsx","webpack://webclient/./src/components/Marker/Marker.tsx","webpack://webclient/./src/components/SideBar/SideBar.tsx","webpack://webclient/./src/commands/index.ts","webpack://webclient/./src/commands/commands.ts","webpack://webclient/./src/components/Details/Details.tsx","webpack://webclient/./src/setup/loadLocale.js","webpack://webclient/./src/setup/addDeviceClassName.js","webpack://webclient/./src/theme/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","setTimeout","head","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","oe","err","console","jsonpArray","window","webpackJsonpwebclient","oldJsonpFunction","slice","require","314","Option_1","locationToView","location","pathname","view","routeId","fromNullable","search","viewToLocation","getOrElse","React","ReactDOMServer","ReactDOM","throttle","mapboxgl","Popup_1","Marker_1","View_1","function_1","popupSettings","closeButton","closeOnClick","offset","anchor","getRouteDistanceInPixels","route","lngLat","map","geometry","coordinates","reduce","acc","point","project","LngLat","lng","lat","routePoint","distance","Math","sqrt","pow","abs","x","y","Infinity","App","this","_this","__proto__","getPrototypeOf","arguments","none","popupSelectedRoute","Popup","popupHoveredRoute","onMouseMove","props","innerRef","closestRoute","routes","onRouteHover","some","PureComponent","_this2","accessToken","Map","container","style","zoom","on","addLayers","addMarkers","startPosition","navigator","geolocation","getCurrentPosition","position","setCenter","coords","longitude","latitude","flyToRoute","animate","padding","selectedRoute","isSome","hoveredRoute","properties","color","_this3","forEach","layer","id","url","source","layout","line-join","line-cap","paint","line-width","line-color","getRouteColor","onRouteSelect","addLayer","_this4","element","render","onClick","Marker","setLngLat","addTo","_this5","setPaintProperty","options","bounds","coord","LngLatBounds","extend","fitBounds","_extends","popup","latLng","setHTML","renderToString","showPopup","remove","fold","identity","initializeMap","prevProps","updateLayers","updateSelectedRoutePopup","updateHoveredRoutePopup","isNone","grow","__webpack_exports__","main","IntlProvider","loadLocale","mountNode","locale","346","polyfill","353","App_1","data_1","queries_1","Explorer_1","Details_1","queries","declareQueries","currentView","Component","ready","className","height","API","model_1","stringToColor","geoJsonLength","Query","params","dependencies","fetch","_ref","cacheStrategy","available","getRoutes","then","features","feature","richFeature","toFixed","elevationGain","round","index","prevAltitude","altitude","_ref2","find","routeReadme","_x","_fetch","toString","_ref3","readmeUrl","exec","text","767","assign","flatten","getGeoJSONs","contents","folders","filter","f","json","files","includes","download_url","html_url","res","geoJSONs","780","FlexView_1","Map_1","SideBar_1","sortBy","Explorer","state","setState","sortedRoutes","getCenter","onRouteClick","column","vAlignContent","795","796","width","viewBox","cursor","marginTop","fillRule","transform","fill","opacity","cx","cy","rx","ry","798","configurable","writable","Button_1","commands_1","react_avenger_1","Route","is-selected","isSelected","shrink","size","label","onDetailsClick","commands","declareCommands","doUpdateLocation","SideBar","stopPropagation","867","Remarkable","Markdown","forceUpdate","images","querySelectorAll","hAlignContent","maxWidth","basis","dangerouslySetInnerHTML","__html","md","Array","from","image","linkify","Details","_buildo_bento_utils__WEBPACK_IMPORTED_MODULE_0__","__WEBPACK_AMD_REQUIRE_ARRAY__","addLocaleDataAndResolve","catch","classnames__WEBPACK_IMPORTED_MODULE_0__","_buildo_bento_utils_mobileDetect__WEBPACK_IMPORTED_MODULE_1__","deviceClassName","is-desktop","isDesktop","is-tablet","isTablet","is-phone","isPhone","body","documentElement","960","961"],"mappings":"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","file":"main.bundle.8e35baed9369de674e54.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".bundle.\" + \"8e35baed9369de674e54\" + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/Explorer/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpwebclient\"] = window[\"webpackJsonpwebclient\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([345,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./queries\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Option_1 = require(\"fp-ts/lib/Option\");\nfunction locationToView(location) {\n    switch (location.pathname) {\n        case \"/details\":\n            return {\n                view: \"details\",\n                routeId: Option_1.fromNullable(location.search.routeId)\n            };\n        default:\n            return { view: \"explorer\" };\n    }\n}\nexports.locationToView = locationToView;\nfunction viewToLocation(view) {\n    switch (view.view) {\n        case \"details\":\n            return {\n                pathname: \"/details\",\n                search: { routeId: view.routeId.getOrElse(\"\") }\n            };\n        case \"explorer\":\n            return { pathname: \"/\", search: {} };\n    }\n}\nexports.viewToLocation = viewToLocation;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst ReactDOMServer = require(\"react-dom/server\");\nconst ReactDOM = require(\"react-dom\");\nconst throttle = require(\"lodash/throttle\");\nconst mapboxgl = require(\"mapbox-gl\");\nconst Popup_1 = require(\"Popup/Popup\");\nconst Marker_1 = require(\"Marker/Marker\");\nconst View_1 = require(\"View\");\nconst Option_1 = require(\"fp-ts/lib/Option\");\nrequire(\"mapbox-gl/dist/mapbox-gl.css\");\nconst function_1 = require(\"fp-ts/lib/function\");\nconst popupSettings = {\n    closeButton: false,\n    closeOnClick: true,\n    offset: [0, -40],\n    anchor: \"bottom\"\n};\nexports.getRouteDistanceInPixels = (route, lngLat, map) => {\n    return route.geometry.coordinates.reduce((acc, coordinates) => {\n        const point = map.project(new mapboxgl.LngLat(lngLat.lng, lngLat.lat));\n        const routePoint = map.project(new mapboxgl.LngLat(coordinates[0], coordinates[1]));\n        const distance = Math.sqrt(Math.pow(Math.abs(point.x - routePoint.x), 2) +\n            Math.pow(Math.abs(point.y - routePoint.y), 2));\n        return distance < acc ? distance : acc;\n    }, Infinity);\n};\nclass App extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.map = Option_1.none;\n        this.popupSelectedRoute = new mapboxgl.Popup(popupSettings);\n        this.popupHoveredRoute = new mapboxgl.Popup(popupSettings);\n        this.onMouseMove = throttle((e) => {\n            this.props.innerRef(this.map);\n            this.map.map(map => {\n                const closestRoute = this.props.routes.reduce((acc, route) => {\n                    const distance = exports.getRouteDistanceInPixels(route, e.lngLat, map);\n                    return distance < acc.distance ? { distance, route } : acc;\n                }, { distance: Infinity });\n                if (closestRoute.distance < 25) {\n                    this.props.onRouteHover(Option_1.some(closestRoute.route));\n                }\n                else {\n                    this.props.onRouteHover(Option_1.none);\n                }\n            });\n        }, 60);\n    }\n    initializeMap() {\n        mapboxgl.accessToken =\n            \"pk.eyJ1IjoiZnJhbmNlc2NvY2lvcmlhIiwiYSI6ImNqcThyejR6ODA2ZDk0M25rZzZjcGo4ZmcifQ.yRWHQbG1dJjDp43d01bBOw\";\n        const map = new mapboxgl.Map({\n            container: \"map\",\n            style: \"mapbox://styles/francescocioria/cjqi3u6lmame92rmw6aw3uyhm\",\n            zoom: 11.0\n        });\n        map.on(\"load\", () => {\n            this.map = Option_1.some(map);\n            this.addLayers();\n            this.addMarkers();\n            if (this.props.startPosition === \"userLocation\") {\n                navigator.geolocation.getCurrentPosition(position => {\n                    map.setCenter(new mapboxgl.LngLat(position.coords.longitude, position.coords.latitude));\n                });\n            }\n            if (this.props.startPosition === \"firstRoute\" &&\n                this.props.routes.length > 0) {\n                this.flyToRoute(this.props.routes[0], { animate: false, padding: 80 });\n            }\n        });\n        map.on(\"mousemove\", this.onMouseMove);\n    }\n    getRouteColor(route) {\n        return (this.props.selectedRoute.isSome() &&\n            route === this.props.selectedRoute.value) ||\n            (this.props.hoveredRoute.isSome() &&\n                route === this.props.hoveredRoute.value)\n            ? \"#387ddf\"\n            : route.properties.color;\n    }\n    addLayers() {\n        this.map.map(map => {\n            this.props.routes.forEach(route => {\n                const layer = {\n                    id: route.properties.url,\n                    type: \"line\",\n                    source: {\n                        type: \"geojson\",\n                        data: route\n                    },\n                    layout: {\n                        \"line-join\": \"round\",\n                        \"line-cap\": \"round\"\n                    },\n                    paint: {\n                        \"line-width\": 3,\n                        \"line-color\": this.getRouteColor(route)\n                    }\n                };\n                map.on(\"click\", layer.id, () => {\n                    this.props.onRouteSelect(route);\n                });\n                map.addLayer(layer);\n            });\n        });\n    }\n    addMarkers() {\n        this.map.map(map => {\n            this.props.routes.forEach(route => {\n                const coordinates = route.geometry.coordinates[0];\n                const element = document.createElement(\"div\");\n                ReactDOM.render(React.createElement(Marker_1.default, { onClick: () => this.props.onRouteSelect(route) }), element);\n                const marker = new mapboxgl.Marker({\n                    element\n                }).setLngLat([coordinates[0], coordinates[1]]);\n                marker.addTo(map);\n            });\n        });\n    }\n    updateLayers() {\n        this.map.map(map => {\n            this.props.routes.forEach(route => {\n                map.setPaintProperty(route.id, \"line-color\", this.getRouteColor(route));\n            });\n        });\n    }\n    flyToRoute(route, options) {\n        this.map.map(map => {\n            const coordinates = route.geometry.coordinates;\n            const bounds = coordinates\n                .map(coord => new mapboxgl.LngLatBounds(coord, coord))\n                .reduce((bounds, coord) => {\n                return bounds.extend(coord);\n            });\n            map.fitBounds(bounds, { padding: 50, ...options });\n        });\n    }\n    showPopup(route, popup) {\n        this.map.map(map => {\n            const latLng = new mapboxgl.LngLat(route.geometry.coordinates[0][0], route.geometry.coordinates[0][1]);\n            popup\n                .setLngLat(latLng)\n                .setHTML(ReactDOMServer.renderToString(React.createElement(Popup_1.default, { route: route })))\n                .addTo(map);\n        });\n    }\n    updateSelectedRoutePopup() {\n        if (this.props.selectedRoute.isSome()) {\n            this.showPopup(this.props.selectedRoute.value, this.popupSelectedRoute);\n        }\n        else {\n            this.popupSelectedRoute.remove();\n        }\n    }\n    updateHoveredRoutePopup() {\n        const { hoveredRoute } = this.props;\n        if (hoveredRoute.isSome() &&\n            hoveredRoute.value !== this.props.selectedRoute.fold(null, function_1.identity)) {\n            this.showPopup(hoveredRoute.value, this.popupHoveredRoute);\n        }\n        else {\n            this.popupHoveredRoute.remove();\n        }\n    }\n    componentDidMount() {\n        this.initializeMap();\n        this.props.innerRef(this.map);\n    }\n    componentDidUpdate(prevProps) {\n        this.updateLayers();\n        this.updateSelectedRoutePopup();\n        this.updateHoveredRoutePopup();\n        if (this.props.selectedRoute.isSome() &&\n            (prevProps.selectedRoute.isNone() ||\n                prevProps.selectedRoute.value !== this.props.selectedRoute.value)) {\n            this.flyToRoute(this.props.selectedRoute.value);\n        }\n    }\n    render() {\n        return React.createElement(View_1.default, { grow: true, id: \"map\" });\n    }\n}\nexports.default = App;\n","/*\n\nThis file prepares the app before rendering with React,\nadding custom polyfills and setting up the `react-intl` provider.\n\nYou shouldn't need to edit this file.\n\n*/\n\nimport './polyfills';\n\n// using require to guarantee they're imported after polyfills are installed\nconst React = require('react');\nconst ReactDOM = require('react-dom');\nconst App = require('components/App').default;\nconst { IntlProvider } = require('@buildo/bento/utils');\nconst { loadLocale } = require('./loadLocale');\n\nrequire('./addDeviceClassName');\nrequire('theme');\n\nexport function main(mountNode) {\n  ReactDOM.render((\n    <IntlProvider loadLocale={loadLocale} locale='it'>\n      <App />\n    </IntlProvider>\n  ), mountNode);\n}\n","require('es6-promise').polyfill();\nrequire('whatwg-fetch');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst App_1 = require(\"./App\");\nexports.default = App_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst data_1 = require(\"@buildo/bento/data\");\nconst queries_1 = require(\"queries\");\nconst View_1 = require(\"View\");\nconst Explorer_1 = require(\"Explorer/Explorer\");\nconst Details_1 = require(\"Details/Details\");\nconst queries = data_1.declareQueries({ currentView: queries_1.currentView });\nclass App extends React.Component {\n    render() {\n        if (!this.props.currentView.ready) {\n            return null;\n        }\n        return (React.createElement(View_1.default, { className: \"app\", height: \"100%\" },\n            this.props.currentView.value.view === \"explorer\" && React.createElement(Explorer_1.default, null),\n            this.props.currentView.value.view === \"details\" && React.createElement(Details_1.default, null)));\n    }\n}\nexports.default = queries(App);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst View_1 = require(\"./View\");\nexports.default = View_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst data_1 = require(\"@buildo/bento/data\");\nexports.location = data_1.location;\nconst API = require(\"API\");\nconst model_1 = require(\"model\");\nconst stringToColor = require(\"string-to-color\");\nconst geoJsonLength = require(\"geojson-length\");\nconst Option_1 = require(\"fp-ts/lib/Option\");\nfunction getElevationGain(coordinates) {\n    return coordinates.reduce((acc, c, index) => {\n        const prevAltitude = index > 0 ? coordinates[index - 1][2] : undefined;\n        const altitude = c[2];\n        if (altitude && prevAltitude && altitude > prevAltitude) {\n            return acc + altitude - prevAltitude;\n        }\n        return acc;\n    }, 0);\n}\nexports.currentView = data_1.Query({\n    params: {},\n    dependencies: { location: data_1.location },\n    fetch: ({ location }) => Promise.resolve(model_1.locationToView(location))\n});\nexports.routes = data_1.Query({\n    cacheStrategy: data_1.available,\n    params: {},\n    fetch: () => API.getRoutes().then(features => features.map(feature => {\n        const richFeature = {\n            id: feature.properties.url,\n            ...feature,\n            properties: {\n                ...feature.properties,\n                color: stringToColor(feature.properties.name),\n                length: (geoJsonLength(feature.geometry) / 1000).toFixed(1),\n                elevationGain: Math.round(getElevationGain(feature.geometry.coordinates))\n            }\n        };\n        return richFeature;\n    }))\n});\nexports.route = data_1.Query({\n    params: {},\n    dependencies: { currentView: exports.currentView, routes: exports.routes },\n    fetch: ({ currentView, routes }) => {\n        if (currentView.view === \"details\" && currentView.routeId.isSome()) {\n            const routeId = currentView.routeId.value;\n            return Promise.resolve(Option_1.fromNullable(routes.find(r => r.id === routeId)));\n        }\n        return Promise.resolve(Option_1.none);\n    }\n});\nexports.routeReadme = data_1.Query({\n    params: {},\n    dependencies: { route: exports.route },\n    fetch: ({ route }) => {\n        if (route.isSome()) {\n            const res = /BikeRoutes.+master\\/(.+)\\/.+$/.exec(route.value.properties.url);\n            const readmeUrl = `https://raw.githubusercontent.com/BikeRoutes/BikeRoutes/master/${res[1]}/README.md`;\n            return fetch(readmeUrl)\n                .then(r => r.text())\n                .then(text => Option_1.some(text));\n        }\n        return Promise.resolve(Option_1.none);\n    }\n});\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./API\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst flatten = require(\"lodash/flatten\");\nfunction getGeoJSONs(contents) {\n    const folders = contents.filter(c => c.type === \"dir\");\n    if (folders.length > 0) {\n        return Promise.all(folders.map(f => fetch(f.url).then(r => r.json())))\n            .then(flatten)\n            .then(getGeoJSONs);\n    }\n    else {\n        const files = contents.filter(c => c.type === \"file\" && c.name.includes(\".geojson\"));\n        return Promise.all(files.map(f => fetch(f.download_url)\n            .then(r => r.json())\n            .then(x => ({\n            ...x,\n            features: [\n                {\n                    ...x.features[0],\n                    properties: {\n                        ...x.features[0].properties,\n                        url: f.html_url\n                    }\n                }\n            ]\n        }))));\n    }\n}\nexports.getRoutes = () => {\n    return fetch(\"https://api.github.com/repos/BikeRoutes/Milano/contents\")\n        .then(res => res.json())\n        .then(getGeoJSONs)\n        .then(geoJSONs => geoJSONs.map(route => route.features[0]));\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst FlexView_1 = require(\"@buildo/bento/components/FlexView\");\nexports.default = FlexView_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst data_1 = require(\"@buildo/bento/data\");\nconst queries_1 = require(\"queries\");\nconst View_1 = require(\"View\");\nconst Map_1 = require(\"Map/Map\");\nconst SideBar_1 = require(\"SideBar/SideBar\");\nconst Option_1 = require(\"fp-ts/lib/Option\");\nconst sortBy = require(\"lodash/sortBy\");\nconst queries = data_1.declareQueries({ routes: queries_1.routes });\nclass Explorer extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.map = Option_1.none;\n        this.state = {\n            selectedRoute: Option_1.none,\n            hoveredRoute: Option_1.none\n        };\n        this.onRouteSelect = (route) => {\n            this.setState({\n                selectedRoute: this.state.selectedRoute.isSome() &&\n                    this.state.selectedRoute.value === route\n                    ? Option_1.none\n                    : Option_1.some(route)\n            });\n        };\n        this.onRouteHover = (route) => {\n            this.setState({\n                hoveredRoute: route\n            });\n        };\n    }\n    render() {\n        const routes = this.props.routes;\n        if (!routes.ready) {\n            return null;\n        }\n        const sortedRoutes = this.map.fold(routes.value, map => sortBy(routes.value, route => Map_1.getRouteDistanceInPixels(route, map.getCenter(), map)));\n        return (React.createElement(View_1.default, { height: \"100%\", grow: true },\n            React.createElement(SideBar_1.default, { routes: sortedRoutes, onRouteClick: this.onRouteSelect, selectedRoute: this.state.selectedRoute }),\n            React.createElement(Map_1.default, { routes: routes.value, selectedRoute: this.state.selectedRoute, hoveredRoute: this.state.hoveredRoute, onRouteHover: this.onRouteHover, onRouteSelect: this.onRouteSelect, innerRef: map => (this.map = map), startPosition: \"userLocation\" })));\n    }\n}\nexports.default = queries(Explorer);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst View_1 = require(\"View\");\nrequire(\"./popup.scss\");\nexports.default = (props) => (React.createElement(View_1.default, { className: \"popup\", column: true },\n    React.createElement(View_1.default, { className: \"name\" }, props.route.properties.name),\n    React.createElement(View_1.default, { className: \"distance\", vAlignContent: \"bottom\" },\n        React.createElement(\"label\", null, \"Distance\"),\n        \" \",\n        props.route.properties.length,\n        \" km\"),\n    React.createElement(View_1.default, { className: \"elevation\", vAlignContent: \"bottom\" },\n        React.createElement(\"label\", null, \"Elevation\"),\n        \" \",\n        props.route.properties.elevationGain,\n        \" m\")));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nexports.default = (props) => (React.createElement(\"svg\", { height: \"41px\", width: \"27px\", viewBox: \"0 0 27 41\", onClick: props.onClick, className: \"marker\", style: { cursor: \"pointer\", marginTop: \"-100%\" } },\n    React.createElement(\"g\", { fillRule: \"nonzero\" },\n        React.createElement(\"g\", { transform: \"translate(3.0, 29.0)\", fill: \"#000000\" },\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"10.5\", ry: \"5.25002273\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"10.5\", ry: \"5.25002273\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"9.5\", ry: \"4.77275007\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"8.5\", ry: \"4.29549936\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"7.5\", ry: \"3.81822308\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"6.5\", ry: \"3.34094679\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"5.5\", ry: \"2.86367051\" }),\n            React.createElement(\"ellipse\", { opacity: \"0.04\", cx: \"10.5\", cy: \"5.80029008\", rx: \"4.5\", ry: \"2.38636864\" })),\n        React.createElement(\"g\", { fill: \"#3FB1CE\" },\n            React.createElement(\"path\", { d: \"M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z\" })),\n        React.createElement(\"g\", { opacity: \"0.25\", fill: \"#000000\" },\n            React.createElement(\"path\", { d: \"M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z\" })),\n        React.createElement(\"g\", { transform: \"translate(6.0, 7.0)\", fill: \"#FFFFFF\" }),\n        React.createElement(\"g\", { transform: \"translate(8.0, 8.0)\" },\n            React.createElement(\"circle\", { fill: \"#000000\", opacity: \"0.25\", cx: \"5.5\", cy: \"5.5\", r: \"5.4999962\" }),\n            React.createElement(\"circle\", { fill: \"#FFFFFF\", cx: \"5.5\", cy: \"5.5\", r: \"5.4999962\" })))));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst cx = require(\"classnames\");\nconst View_1 = require(\"View\");\nconst model_1 = require(\"model\");\nconst Option_1 = require(\"fp-ts/lib/Option\");\nconst Button_1 = require(\"@buildo/bento/components/Button\");\nconst commands_1 = require(\"commands\");\nconst react_avenger_1 = require(\"react-avenger\");\nrequire(\"./sideBar.scss\");\nrequire(\"@buildo/bento/components/button.scss\");\nconst Route = (props) => (React.createElement(View_1.default, { className: cx(\"route\", { \"is-selected\": props.isSelected }), column: true, onClick: props.onClick, shrink: false },\n    React.createElement(View_1.default, { className: \"name\" }, props.route.properties.name),\n    React.createElement(View_1.default, { className: \"distance\", vAlignContent: \"bottom\" },\n        React.createElement(\"label\", null, \"Distance\"),\n        \" \",\n        props.route.properties.length,\n        \" km\"),\n    React.createElement(View_1.default, { className: \"elevation\", vAlignContent: \"bottom\" },\n        React.createElement(\"label\", null, \"Elevation\"),\n        \" \",\n        props.route.properties.elevationGain,\n        \" m\"),\n    React.createElement(View_1.default, { className: \"actions\" },\n        React.createElement(Button_1.default, { size: \"tiny\", label: \"Details\", onClick: props.onDetailsClick }))));\nconst commands = react_avenger_1.declareCommands({ doUpdateLocation: commands_1.doUpdateLocation });\nclass SideBar extends React.Component {\n    render() {\n        return (React.createElement(View_1.default, { className: \"side-bar\", column: true, shrink: false },\n            React.createElement(\"h2\", null, \"Routes\"),\n            this.props.routes.map((route, index) => (React.createElement(Route, { key: index, route: route, onClick: () => this.props.onRouteClick(route), isSelected: this.props.selectedRoute.isSome() &&\n                    this.props.selectedRoute.value === route, onDetailsClick: e => {\n                    e.stopPropagation();\n                    this.props.doUpdateLocation(model_1.viewToLocation({ view: \"details\", routeId: Option_1.some(route.id) }));\n                } })))));\n    }\n}\nexports.default = commands(SideBar);\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./commands\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst data_1 = require(\"@buildo/bento/data\");\nexports.doUpdateLocation = data_1.doUpdateLocation;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = require(\"react\");\nconst data_1 = require(\"@buildo/bento/data\");\nconst queries_1 = require(\"queries\");\nconst View_1 = require(\"View\");\nconst Map_1 = require(\"../Map/Map\");\nconst Remarkable = require(\"remarkable\");\nrequire(\"./details.scss\");\nconst Option_1 = require(\"fp-ts/lib/Option\");\nclass Markdown extends React.PureComponent {\n    componentDidMount() {\n        this.forceUpdate();\n    }\n    render() {\n        const images = document.querySelectorAll(\".markdown img\");\n        return (React.createElement(View_1.default, { className: \"markdown\", hAlignContent: \"center\", shrink: false },\n            React.createElement(View_1.default, { style: { maxWidth: 1200 }, grow: true },\n                React.createElement(View_1.default, { basis: \"70%\", column: true },\n                    React.createElement(View_1.default, { className: \"remarkable\", column: true, grow: true, dangerouslySetInnerHTML: {\n                            __html: md.render(this.props.routeReadme)\n                        } }),\n                    React.createElement(View_1.default, { className: \"summary\" },\n                        React.createElement(View_1.default, { className: \"distance\", column: true },\n                            React.createElement(\"span\", null,\n                                this.props.route.properties.length,\n                                \" km\"),\n                            React.createElement(\"label\", null, \"Distance\")),\n                        React.createElement(View_1.default, { className: \"elevation\", column: true },\n                            React.createElement(\"span\", null,\n                                this.props.route.properties.elevationGain,\n                                \" m\"),\n                            React.createElement(\"label\", null, \"Elevation\")))),\n                React.createElement(View_1.default, { className: \"images\", hAlignContent: \"right\", basis: \"30%\" }, Array.from(images).map(image => (React.createElement(\"img\", { key: image.src, src: image.src })))))));\n    }\n}\nconst md = new Remarkable({\n    linkify: true\n});\nconst queries = data_1.declareQueries({ route: queries_1.route, routeReadme: queries_1.routeReadme });\nclass Details extends React.Component {\n    render() {\n        if (!this.props.route.ready ||\n            this.props.route.value.isNone() ||\n            !this.props.routeReadme.ready ||\n            this.props.routeReadme.value.isNone()) {\n            return null;\n        }\n        return (React.createElement(View_1.default, { className: \"details\", height: \"100%\", grow: true, column: true },\n            React.createElement(Markdown, { routeReadme: this.props.routeReadme.value.value, route: this.props.route.value.value }),\n            React.createElement(View_1.default, { basis: 600, className: \"map-wrapper\" },\n                React.createElement(Map_1.default, { routes: [this.props.route.value.value], startPosition: \"firstRoute\", hoveredRoute: Option_1.none, selectedRoute: Option_1.none, onRouteHover: () => { }, onRouteSelect: () => { }, innerRef: () => { } }))));\n    }\n}\nexports.default = queries(Details);\n","import { addLocaleDataAndResolve } from '@buildo/bento/utils';\n\n/*\n\nIn this `loadLocale` function we import the required locale data for our app.\nThis function ensures only the required files are loaded based on the locale we want to serve to the user.\n\nThe stesp to add a new locale (language) are:\n- create a new file in `locales`, such as `myLang.json`. It should respect the format of the other locale files\n- add the new `case` in the function below.\nThe documentation for `react-intl/locale-data` packages can be found at https://github.com/yahoo/react-intl/wiki#loading-locale-data\n\n*/\n\nexport function loadLocale(locale) {\n  return new Promise(resolve => {\n    switch (locale) {\n      case 'it':\n        return require(\n          ['locales/it', 'react-intl/locale-data/it'],\n          addLocaleDataAndResolve(locale, resolve)\n        );\n      case 'en':\n      default:\n        return require(\n          ['locales/en', 'react-intl/locale-data/en'],\n          addLocaleDataAndResolve(locale, resolve)\n        );\n    }\n  });\n}","// This script adds \"is-desktop\", \"is-phone\" or \"is-tablet\" class to the root document element\n\nimport * as cx from 'classnames';\nimport mobileDetect from '@buildo/bento/utils/mobileDetect';\n\nconst md = mobileDetect();\n\nconst deviceClassName = cx({\n  'is-desktop': md.isDesktop,\n  'is-tablet': md.isTablet,\n  'is-phone': md.isPhone\n});\n\n// document.documentElement is not supported in every browser, fallback on document.body\nconst body = (document.documentElement || document.body);\n\nbody.className = cx(body.className, deviceClassName);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"@buildo/bento/theme/normalize-css\");\nrequire(\"@buildo/bento/theme/normalize-css/fullscreenApp\");\nrequire(\"./main.scss\");\nrequire(\"./typography.scss\");\n"],"sourceRoot":""}