var webclient=function(e){function t(t){for(var r,u,c=t[0],a=t[1],l=t[2],f=0,p=[];f<c.length;f++)u=c[f],o[u]&&p.push(o[u][0]),o[u]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(s&&s(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var a=n[c];0!==o[a]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={0:0},i=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=r);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=function(e){return u.p+""+({}[e]||e)+".bundle.19c6152b32057146c362.js"}(e),i=function(t){c.onerror=c.onload=null,clearTimeout(a);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,u=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");u.type=r,u.request=i,n[1](u)}o[e]=void 0}};var a=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/Explorer/",u.oe=function(e){throw console.error(e),e};var c=window.webpackJsonpwebclient=window.webpackJsonpwebclient||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=a;return i.push([266,1]),n()}({264:function(e,t){},266:function(e,t,n){"use strict";n.r(t),n.d(t,"main",function(){return a}),n(267);var r=n(4),o=n(271),i=n(275).default,u=n(69).IntlProvider,c=n(745).loadLocale;function a(e){o.render(r.createElement(u,{loadLocale:c,locale:"it"},r.createElement(i,null)),e)}n(746),n(747)},267:function(e,t,n){n(268).polyfill(),n(269)},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(276);t.default=r.default},276:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(277),u=n(114),c=n(706);n(718);var a=u.declareQueries({collection:c.collection}),l=function(e){return o.createElement("div",null,o.createElement("div",null,"Name: ",e.feature.properties.name),o.createElement("div",null,"Length: ",e.feature.properties.length," km"),o.createElement("div",null,"Elevation gain: ",e.feature.properties.elevationGain," m"))},s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidUpdate",value:function(){if(this.props.collection.ready){var e=L.map("map");L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZnJhbmNlc2NvY2lvcmlhIiwiYSI6ImNqcThzMDJrejJ1bzgzeGxjZTZ2aXR0cHMifQ.qzCmhZEf3Ta1YHvAfli3bA"}).addTo(e);var t=L.geoJson(this.props.collection.value,{onEachFeature:function(e,t){t.bindPopup(i.renderToString(o.createElement(l,{feature:e})))},style:function(e){return{color:e.properties.color}}}).addTo(e);e.fitBounds(t.getBounds())}}},{key:"render",value:function(){return this.props.collection.ready?o.createElement("div",{id:"map",style:{height:"100%",width:"100%"}}):null}}]),t}();t.default=a(s)},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(707))},707:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(114);t.location=o.location;var i=n(708),u=n(710),c=n(711),a=n(717);t.currentView=o.Query({params:{},dependencies:{location:o.location},fetch:function(e){var t=e.location;return Promise.resolve(u.locationToView(t))}}),t.routes=o.Query({params:{},fetch:function(){return i.getRoutes()}}),t.collection=o.Query({dependencies:{routes:t.routes},params:{},fetch:function(e){var t=e.routes.reduce(function(e,t){return r({},e,{features:e.features.concat(t.features.map(function(e){return r({},e,{properties:r({},e.properties,{color:c(e.properties.name),length:(a(e.geometry)/1e3).toFixed(1),elevationGain:Math.round(function(e){return e.reduce(function(t,n,r){var o=r>0?e[r-1][2]:void 0,i=n[2];return i&&o&&i>o?t+i-o:t},0)}(e.geometry.coordinates))})})}))})},{type:"FeatureCollection",features:[]});return Promise.resolve(t)}})},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(709))},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(123);t.getRoutes=function(){return fetch("https://api.github.com/repos/BikeRoutes/Milano/contents").then(function(e){return e.json()}).then(function(e){var t=e.filter(function(e){return"dir"===e.type});return Promise.all(t.map(function(e){return fetch(e.url).then(function(e){return e.json()})}))}).then(r).then(function(e){return e.filter(function(e){return"file"===e.type&&e.name.includes(".geojson")})}).then(function(e){return Promise.all(e.map(function(e){return fetch(e.download_url).then(function(e){return e.json()})}))})}},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locationToView=function(e){switch(e.pathname){case"/hello":return"hello";default:return"home"}},t.viewToLocation=function(e){switch(e){case"hello":return{pathname:"/hello",search:{}};default:return{pathname:"/",search:{}}}}},718:function(e,t,n){},734:function(e,t){},740:function(e,t){},745:function(e,t,n){"use strict";n.r(t),n.d(t,"loadLocale",function(){return o});var r=n(69);function o(e){return new Promise(function(t){switch(e){case"it":return Promise.all([n.e(3),n.e(5)]).then(function(){var o=[n(759),n(760)];Object(r.addLocaleDataAndResolve)(e,t).apply(null,o)}.bind(this)).catch(n.oe);case"en":default:return Promise.all([n.e(2),n.e(4)]).then(function(){var o=[n(761),n(762)];Object(r.addLocaleDataAndResolve)(e,t).apply(null,o)}.bind(this)).catch(n.oe)}})}},746:function(e,t,n){"use strict";n.r(t);var r=n(113),o=n(112),i=n.n(o)()(),u=r({"is-desktop":i.isDesktop,"is-tablet":i.isTablet,"is-phone":i.isPhone}),c=document.documentElement||document.body;c.className=r(c.className,u)},747:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(748),n(755),n(757),n(758)},757:function(e,t,n){},758:function(e,t,n){}});
//# sourceMappingURL=main.bundle.19c6152b32057146c362.js.map